(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F;c=illuminated.Lamp,i=illuminated.RectangleObject,b=illuminated.DiscObject,h=illuminated.PolygonObject,k=illuminated.Vec2,d=illuminated.Lighting,a=illuminated.DarkMask,m=document.getElementsByTagName("canvas")[0],o=m.getContext("2d"),m.width=window.innerWidth,m.height=window.innerHeight,E=F=0,w=null,g=1.1,f=14,l=40,B=+new Date,s=new c({color:"rgba(255, 220, 150, 0.6)",distance:300}),v=[new i({topleft:new k(60,250),bottomright:new k(140,330)}),new i({topleft:new k(50,50),bottomright:new k(100,100)}),new b({center:new k(550,300),radius:50}),new b({center:new k(550,130),radius:20}),e=new h({points:$.map([{x:287,y:132},{x:245,y:90},{x:269,y:146},{x:218,y:159},{x:270,y:171},{x:252,y:214},{x:286,y:181},{x:319,y:224},{x:310,y:177},{x:367,y:183},{x:309,y:157},{x:342,y:86}],function(a){return new k(a.x,a.y)})})],t=new d({light:s,objects:v}),p=new a({lights:[s],color:"rgba(0,0,0,0.8)"}),x=Math.round(2e3+600*Math.random()),D=function(){var a,b,c;return b=+new Date-B,a=x+500*Math.cos(b/3e3),c=b/a,E=140+150*(1+Math.cos(c)),F=160*(1+Math.sin(c)),s.position.x=E+.65*l,s.position.y=F+.55*l},z=null,n=function(){return z=[],(w.particles||[]).forEach(function(a){return a.timeToLive>4?z.push(new k(a.position.x,a.position.y)):void 0}),s.samples=z.length},q=function(){return w&&w.stop(),w=new cParticleSystem,w.maxParticles=60,w.lifeSpan=f,w.lifeSpanRandom=1,w.position.x=-1e3,w.position.y=-1e3,w.startColour=[240,208,68,1],w.startColourRandom=[40,40,60,0],w.finishColour=[245,35,0,0],w.finishColourRandom=[20,20,20,0],w.gravity={x:0,y:-.02*l},w.size=g*l,w.sizeRandom=.4*l,w.speed=.01*l,w.speedRandom=.005*l,w.sharpness=.3*l,w.sharpnessRandom=.1*l,w.positionRandom={x:.1*l,y:.1*l},w.init(),n(),s.forEachSample=function(a){return z.forEach(a)}},r=0,j=25,C=function(){return n(),D(),w.position.x=E,w.position.y=F,w.update(1),t.compute(m.width,m.height),p.compute(m.width,m.height)},A=function(){return q(),C()},u=new Image,u.onload=function(){var a;return a=!0},u.src="../assets/galvanized-plate.jpg",y=function(){var a,b;return b=m.width,a=m.height,o.fillStyle="#000",o.fillRect(0,0,b,a),o.save(),o.fillStyle="white",v.forEach(function(a){var b,c;return o.save(),o.beginPath(),a.path(o),o.clip(),b=a.bounds(),c=b.topleft,o.drawImage(u,c.x,c.y),o.restore(),o.save(),o.lineWidth=1,o.strokeStyle="#778",o.beginPath(),a.path(o),o.stroke(),o.restore()}),o.globalCompositeOperation="lighter",t.render(o),w.render(o),o.restore(),o.globalCompositeOperation="source-over",p.render(o)},A(),requestAnimFrame(function G(){requestAnimFrame(G,m);var a=+new Date;a>=r+j&&(r=a,C()),y()},m)}).call(this);